"use strict";(self.webpackChunkfootball_fixer_frontend=self.webpackChunkfootball_fixer_frontend||[]).push([[463],{463:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});var a=i(43),n=i(198),l=i(729),s=i(579);const c=function(e){let{match:t,onClose:i}=e;const[l,c]=(0,a.useState)({title:(null===t||void 0===t?void 0:t.title)||"",date:(null===t||void 0===t?void 0:t.date)||"",matchTime:(null===t||void 0===t?void 0:t.matchTime)||"",location:(null===t||void 0===t?void 0:t.location)||"",description:(null===t||void 0===t?void 0:t.description)||""}),[d,o]=(0,a.useState)(!1),[r,u]=(0,a.useState)(""),h=e=>c({...l,[e.target.name]:e.target.value});return(0,s.jsxs)("div",{style:{border:"1px solid #ccc",padding:16,margin:16},children:[(0,s.jsx)("h3",{children:t?"Edit Match":"Create Match"}),r&&(0,s.jsx)("div",{style:{color:"red"},children:r}),(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0),u("");try{t?await n.A.put(`/matches/${t._id}`,l):await n.A.post("/matches",l),i()}catch(a){u("Failed to save match")}finally{o(!1)}},children:[(0,s.jsx)("input",{name:"title",value:l.title,onChange:h,placeholder:"Title",required:!0}),(0,s.jsx)("input",{name:"date",value:l.date,onChange:h,type:"date",required:!0}),(0,s.jsx)("input",{name:"matchTime",value:l.matchTime,onChange:h,type:"time",required:!0}),(0,s.jsx)("input",{name:"location",value:l.location,onChange:h,placeholder:"Location",required:!0}),(0,s.jsx)("textarea",{name:"description",value:l.description,onChange:h,placeholder:"Description"}),(0,s.jsx)("button",{type:"submit",disabled:d,children:d?"Saving...":"Save"}),(0,s.jsx)("button",{type:"button",onClick:i,style:{marginLeft:8},children:"Cancel"})]})]})};const d=function(){const[e,t]=(0,a.useState)([]),[i,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[o,r]=(0,a.useState)("");(0,a.useEffect)(()=>{u()},[]);const u=async()=>{d(!0),r("");try{const e=await n.A.get("/invites/sent"),i=await n.A.get("/invites/received");t(e.data),l(i.data)}catch(e){r("Failed to load invites")}finally{d(!1)}},h=async(e,t)=>{try{await n.A.put(`/invites/${e}/${t}`),u()}catch{alert("Failed to update invite")}};return c?(0,s.jsx)("div",{children:"Loading invites..."}):o?(0,s.jsx)("div",{style:{color:"red"},children:o}):(0,s.jsxs)("div",{style:{marginTop:32},children:[(0,s.jsx)("h3",{children:"Sent Invites"}),(0,s.jsx)("ul",{children:e.map(e=>{var t;return(0,s.jsxs)("li",{children:["Match: ",(null===(t=e.matchId)||void 0===t?void 0:t.title)||e.matchId," | Status: ",e.status]},e._id)})}),(0,s.jsx)("h3",{children:"Received Invites"}),(0,s.jsx)("ul",{children:i.map(e=>{var t,i;return(0,s.jsxs)("li",{children:["From: ",(null===(t=e.fromTeam)||void 0===t?void 0:t.teamName)||e.fromTeam," | Match: ",(null===(i=e.matchId)||void 0===i?void 0:i.title)||e.matchId," | Status: ",e.status,"pending"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>h(e._id,"accept"),children:"Accept"}),(0,s.jsx)("button",{onClick:()=>h(e._id,"decline"),children:"Decline"})]})]},e._id)})})]})};const o=function(){const{user:e}=(0,l.A)(),[t,i]=(0,a.useState)([]),[o,r]=(0,a.useState)(!0),[u,h]=(0,a.useState)(""),[m,v]=(0,a.useState)(!1),[x,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{p()},[]);const p=async()=>{r(!0),h("");try{const e=await n.A.get("/matches");i(e.data)}catch(e){h("Failed to load matches")}finally{r(!1)}};return o?(0,s.jsx)("div",{children:"Loading..."}):u?(0,s.jsx)("div",{style:{color:"red"},children:u}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Upcoming Matches"}),(0,s.jsx)("button",{onClick:()=>{j(null),v(!0)},children:"Create Match"}),(0,s.jsx)("ul",{children:t.map(e=>(0,s.jsx)("li",{style:{marginBottom:16},children:(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:e.title})," (Date: ",e.date," Time: ",e.matchTime,")",(0,s.jsx)("button",{onClick:()=>(e=>{j(e),v(!0)})(e),style:{marginLeft:8},children:"Edit"}),(0,s.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this match?"))try{await n.A.delete(`/matches/${e}`),p()}catch(t){alert("Failed to delete match")}})(e._id),style:{marginLeft:8},children:"Delete"}),(0,s.jsx)("button",{onClick:()=>window.location.href=`/matches/${e._id}`,children:"View Details"})]})},e._id))}),m&&(0,s.jsx)(c,{match:x,onClose:()=>{v(!1),j(null),p()}}),(0,s.jsx)(d,{})]})}}}]);
//# sourceMappingURL=463.0b18c883.chunk.js.map